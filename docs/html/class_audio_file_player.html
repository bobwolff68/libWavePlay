<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WavePlay: AudioFilePlayer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">WavePlay
   </div>
   <div id="projectbrief">Support classes for real-time processing and playout of WAV/PCM files on ESP32</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="class_audio_file_player-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">AudioFilePlayer Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Support for playing and pausing a single file.  
 <a href="class_audio_file_player.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_audio_file_player_8h_source.html">AudioFilePlayer.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for AudioFilePlayer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_audio_file_player.png" usemap="#AudioFilePlayer_map" alt=""/>
  <map id="AudioFilePlayer_map" name="AudioFilePlayer_map">
<area href="class_robo_task.html" title="Abstract superclass of tasks (run on a separate thread). Call Start() to begin the task and Pause() t..." alt="RoboTask" shape="rect" coords="0,0,103,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aef3d12be87981e0f090deb39bc083b61"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#aef3d12be87981e0f090deb39bc083b61">AudioFilePlayer</a> (uint8_t esp32Timer, uint8_t esp32Pin)</td></tr>
<tr class="memdesc:aef3d12be87981e0f090deb39bc083b61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instantiates and sets up the hardware. Kicks off a thread for native playout as well.  <br /></td></tr>
<tr class="separator:aef3d12be87981e0f090deb39bc083b61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a4c7bfa95e231deab8ed7634f550be8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#a7a4c7bfa95e231deab8ed7634f550be8">~AudioFilePlayer</a> ()</td></tr>
<tr class="separator:a7a4c7bfa95e231deab8ed7634f550be8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90705f16e35b21b41e1b9ebe8b955f9c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#a90705f16e35b21b41e1b9ebe8b955f9c">LoadFile</a> (const char *fname)</td></tr>
<tr class="memdesc:a90705f16e35b21b41e1b9ebe8b955f9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method causes the file header to be parsed and processed to be ready for playout.  <br /></td></tr>
<tr class="separator:a90705f16e35b21b41e1b9ebe8b955f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7fae0a0b46f7c91937a9f037d7e936f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#aa7fae0a0b46f7c91937a9f037d7e936f">PlayFile</a> ()</td></tr>
<tr class="memdesc:aa7fae0a0b46f7c91937a9f037d7e936f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kick off the playout of the file.  <br /></td></tr>
<tr class="separator:aa7fae0a0b46f7c91937a9f037d7e936f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b6a61f5fbde6702feb54612039f8ee6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#a2b6a61f5fbde6702feb54612039f8ee6">PauseFile</a> ()</td></tr>
<tr class="memdesc:a2b6a61f5fbde6702feb54612039f8ee6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pause playback.  <br /></td></tr>
<tr class="separator:a2b6a61f5fbde6702feb54612039f8ee6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe1d3bc725cc013cac87a023ff4433c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#abe1d3bc725cc013cac87a023ff4433c0">SetVolume</a> (uint8_t _vol)</td></tr>
<tr class="memdesc:abe1d3bc725cc013cac87a023ff4433c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attenuation of the signal in software. This does not control hardware.  <br /></td></tr>
<tr class="separator:abe1d3bc725cc013cac87a023ff4433c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa157d566ce44ed80c4bbe7fdceb0f805"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#aa157d566ce44ed80c4bbe7fdceb0f805">isDonePlaying</a> ()</td></tr>
<tr class="memdesc:aa157d566ce44ed80c4bbe7fdceb0f805"><td class="mdescLeft">&#160;</td><td class="mdescRight">Status of when the file is done being played fully.  <br /></td></tr>
<tr class="separator:aa157d566ce44ed80c4bbe7fdceb0f805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4bec87812da081a971dbdc2ffa6d0ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#ab4bec87812da081a971dbdc2ffa6d0ca">Run</a> ()</td></tr>
<tr class="memdesc:ab4bec87812da081a971dbdc2ffa6d0ca"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_robo_task.html" title="Abstract superclass of tasks (run on a separate thread). Call Start() to begin the task and Pause() t...">RoboTask</a>'s thread-based worker for native mode. In ESP32 mode, the ISR handles DAC writing.  <br /></td></tr>
<tr class="separator:ab4bec87812da081a971dbdc2ffa6d0ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a784d77663c918db8e2a27d3a332acb94"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#a784d77663c918db8e2a27d3a332acb94">printDataTable</a> ()</td></tr>
<tr class="memdesc:a784d77663c918db8e2a27d3a332acb94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility for inspecting what values will be used given a volume set via <a class="el" href="class_audio_file_player.html#abe1d3bc725cc013cac87a023ff4433c0" title="Attenuation of the signal in software. This does not control hardware.">SetVolume()</a>  <br /></td></tr>
<tr class="separator:a784d77663c918db8e2a27d3a332acb94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a8a312826619a56757d19196d8c004f1d"><td class="memItemLeft" align="right" valign="top">static void IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#a8a312826619a56757d19196d8c004f1d">timerISRCallback</a> ()</td></tr>
<tr class="memdesc:a8a312826619a56757d19196d8c004f1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt service routine for ESP32 to control precise writing of DAC values.  <br /></td></tr>
<tr class="separator:a8a312826619a56757d19196d8c004f1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ae1fbdee2b20f23494c8cd5c51880a5c6"><td class="memItemLeft" align="right" valign="top">static WaveFileType *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#ae1fbdee2b20f23494c8cd5c51880a5c6">pWave</a> = nullptr</td></tr>
<tr class="memdesc:ae1fbdee2b20f23494c8cd5c51880a5c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base class instance for the loaded wave file to be processed/played.  <br /></td></tr>
<tr class="separator:ae1fbdee2b20f23494c8cd5c51880a5c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a276302fd9d6beee55f40c42a5a6d7e69"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#a276302fd9d6beee55f40c42a5a6d7e69">pinDAC</a> = 0</td></tr>
<tr class="memdesc:a276302fd9d6beee55f40c42a5a6d7e69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holding place for the pin used as the DAC output.  <br /></td></tr>
<tr class="separator:a276302fd9d6beee55f40c42a5a6d7e69"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a882e70cb1be607881e815d6974134e10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#a882e70cb1be607881e815d6974134e10">calcDataTableBasedOnVolume</a> ()</td></tr>
<tr class="memdesc:a882e70cb1be607881e815d6974134e10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Worker for calculating <code>pDataTable[]</code> values once the volume is changed in SetVolume.  <br /></td></tr>
<tr class="separator:a882e70cb1be607881e815d6974134e10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a52ce0922916bb55b1d57af3535112a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#a1a52ce0922916bb55b1d57af3535112a">killTimer</a> ()</td></tr>
<tr class="memdesc:a1a52ce0922916bb55b1d57af3535112a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the hardware resource.  <br /></td></tr>
<tr class="separator:a1a52ce0922916bb55b1d57af3535112a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bbb2b4c62f6e5ed00d21b4b3764ffc9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#a4bbb2b4c62f6e5ed00d21b4b3764ffc9">pauseTimer</a> ()</td></tr>
<tr class="memdesc:a4bbb2b4c62f6e5ed00d21b4b3764ffc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the hardware resource.  <br /></td></tr>
<tr class="separator:a4bbb2b4c62f6e5ed00d21b4b3764ffc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aa6ca81bc127489899a0ea42ff2126db6"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#aa6ca81bc127489899a0ea42ff2126db6">taskSleepTimeTarget</a></td></tr>
<tr class="memdesc:aa6ca81bc127489899a0ea42ff2126db6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used in native mode to simulate processing at semi-realtime of the data (slowing things down)  <br /></td></tr>
<tr class="separator:aa6ca81bc127489899a0ea42ff2126db6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7acade6317d57f2aee2f4b369773369"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#ac7acade6317d57f2aee2f4b369773369">timerNumber</a></td></tr>
<tr class="memdesc:ac7acade6317d57f2aee2f4b369773369"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holding place for the timer number to be used in the ESP32 device.  <br /></td></tr>
<tr class="separator:ac7acade6317d57f2aee2f4b369773369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab006ad05296455425e7a7c5638d42c84"><td class="memItemLeft" align="right" valign="top">hw_timer_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#ab006ad05296455425e7a7c5638d42c84">HWTimer</a></td></tr>
<tr class="memdesc:ab006ad05296455425e7a7c5638d42c84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer resource from ESP32.  <br /></td></tr>
<tr class="separator:ab006ad05296455425e7a7c5638d42c84"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a00bda6824532ec3ee33119cd70e933ee"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#a00bda6824532ec3ee33119cd70e933ee">pDataTable</a> [256]</td></tr>
<tr class="separator:a00bda6824532ec3ee33119cd70e933ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28036a3b6eb48df2d0a85e174d1fab3d"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_file_player.html#a28036a3b6eb48df2d0a85e174d1fab3d">curVolume</a> = 100</td></tr>
<tr class="memdesc:a28036a3b6eb48df2d0a85e174d1fab3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holder for the current volume value.  <br /></td></tr>
<tr class="separator:a28036a3b6eb48df2d0a85e174d1fab3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Support for playing and pausing a single file. </p>
<p>ESP32-centric class for playout and managment of playout for a single audio file. Timer and DAC pin are required inputs for ESP32 usage. When running in native compile mode, class will 'go through the motions' but will not actually play. Based on <a class="el" href="class_robo_task.html" title="Abstract superclass of tasks (run on a separate thread). Call Start() to begin the task and Pause() t...">RoboTask</a> for its independent threaded runtime. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aef3d12be87981e0f090deb39bc083b61" name="aef3d12be87981e0f090deb39bc083b61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef3d12be87981e0f090deb39bc083b61">&#9670;&#160;</a></span>AudioFilePlayer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AudioFilePlayer::AudioFilePlayer </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>esp32Timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>esp32Pin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Instantiates and sets up the hardware. Kicks off a thread for native playout as well. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">esp32Timer</td><td>- there are 4 timers in the ESP32 [0-3] </td></tr>
    <tr><td class="paramname">esp32Pin</td><td>- there are two DAC pins on the ESP32 - 25 and 26 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7a4c7bfa95e231deab8ed7634f550be8" name="a7a4c7bfa95e231deab8ed7634f550be8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a4c7bfa95e231deab8ed7634f550be8">&#9670;&#160;</a></span>~AudioFilePlayer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AudioFilePlayer::~AudioFilePlayer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a882e70cb1be607881e815d6974134e10" name="a882e70cb1be607881e815d6974134e10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a882e70cb1be607881e815d6974134e10">&#9670;&#160;</a></span>calcDataTableBasedOnVolume()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AudioFilePlayer::calcDataTableBasedOnVolume </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Worker for calculating <code>pDataTable[]</code> values once the volume is changed in SetVolume. </p>

</div>
</div>
<a id="aa157d566ce44ed80c4bbe7fdceb0f805" name="aa157d566ce44ed80c4bbe7fdceb0f805"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa157d566ce44ed80c4bbe7fdceb0f805">&#9670;&#160;</a></span>isDonePlaying()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AudioFilePlayer::isDonePlaying </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Status of when the file is done being played fully. </p>

</div>
</div>
<a id="a1a52ce0922916bb55b1d57af3535112a" name="a1a52ce0922916bb55b1d57af3535112a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a52ce0922916bb55b1d57af3535112a">&#9670;&#160;</a></span>killTimer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AudioFilePlayer::killTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Manage the hardware resource. </p>

</div>
</div>
<a id="a90705f16e35b21b41e1b9ebe8b955f9c" name="a90705f16e35b21b41e1b9ebe8b955f9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90705f16e35b21b41e1b9ebe8b955f9c">&#9670;&#160;</a></span>LoadFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AudioFilePlayer::LoadFile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method causes the file header to be parsed and processed to be ready for playout. </p>
<dl class="section return"><dt>Returns</dt><dd>true on success or false if file could not be loaded/found/parsed. </dd></dl>

</div>
</div>
<a id="a2b6a61f5fbde6702feb54612039f8ee6" name="a2b6a61f5fbde6702feb54612039f8ee6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b6a61f5fbde6702feb54612039f8ee6">&#9670;&#160;</a></span>PauseFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AudioFilePlayer::PauseFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pause playback. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>this needs further testing </dd></dl>

</div>
</div>
<a id="a4bbb2b4c62f6e5ed00d21b4b3764ffc9" name="a4bbb2b4c62f6e5ed00d21b4b3764ffc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bbb2b4c62f6e5ed00d21b4b3764ffc9">&#9670;&#160;</a></span>pauseTimer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AudioFilePlayer::pauseTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Manage the hardware resource. </p>

</div>
</div>
<a id="aa7fae0a0b46f7c91937a9f037d7e936f" name="aa7fae0a0b46f7c91937a9f037d7e936f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7fae0a0b46f7c91937a9f037d7e936f">&#9670;&#160;</a></span>PlayFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AudioFilePlayer::PlayFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Kick off the playout of the file. </p>

</div>
</div>
<a id="a784d77663c918db8e2a27d3a332acb94" name="a784d77663c918db8e2a27d3a332acb94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a784d77663c918db8e2a27d3a332acb94">&#9670;&#160;</a></span>printDataTable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AudioFilePlayer::printDataTable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Utility for inspecting what values will be used given a volume set via <a class="el" href="class_audio_file_player.html#abe1d3bc725cc013cac87a023ff4433c0" title="Attenuation of the signal in software. This does not control hardware.">SetVolume()</a> </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_audio_file_player.html#abe1d3bc725cc013cac87a023ff4433c0" title="Attenuation of the signal in software. This does not control hardware.">SetVolume</a> </dd></dl>

</div>
</div>
<a id="ab4bec87812da081a971dbdc2ffa6d0ca" name="ab4bec87812da081a971dbdc2ffa6d0ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4bec87812da081a971dbdc2ffa6d0ca">&#9670;&#160;</a></span>Run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AudioFilePlayer::Run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="class_robo_task.html" title="Abstract superclass of tasks (run on a separate thread). Call Start() to begin the task and Pause() t...">RoboTask</a>'s thread-based worker for native mode. In ESP32 mode, the ISR handles DAC writing. </p>

<p>Implements <a class="el" href="class_robo_task.html#ac3cffeb81e0bf4ecd03eb2a74dd9022a">RoboTask</a>.</p>

</div>
</div>
<a id="abe1d3bc725cc013cac87a023ff4433c0" name="abe1d3bc725cc013cac87a023ff4433c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe1d3bc725cc013cac87a023ff4433c0">&#9670;&#160;</a></span>SetVolume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AudioFilePlayer::SetVolume </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>_vol</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attenuation of the signal in software. This does not control hardware. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_vol</td><td>is a range of 0-100 where 100 is a fully unmodified playout. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8a312826619a56757d19196d8c004f1d" name="a8a312826619a56757d19196d8c004f1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a312826619a56757d19196d8c004f1d">&#9670;&#160;</a></span>timerISRCallback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void IRAM_ATTR AudioFilePlayer::timerISRCallback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Interrupt service routine for ESP32 to control precise writing of DAC values. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a28036a3b6eb48df2d0a85e174d1fab3d" name="a28036a3b6eb48df2d0a85e174d1fab3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28036a3b6eb48df2d0a85e174d1fab3d">&#9670;&#160;</a></span>curVolume</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t AudioFilePlayer::curVolume = 100</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Holder for the current volume value. </p>

</div>
</div>
<a id="ab006ad05296455425e7a7c5638d42c84" name="ab006ad05296455425e7a7c5638d42c84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab006ad05296455425e7a7c5638d42c84">&#9670;&#160;</a></span>HWTimer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">hw_timer_t* AudioFilePlayer::HWTimer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Timer resource from ESP32. </p>

</div>
</div>
<a id="a00bda6824532ec3ee33119cd70e933ee" name="a00bda6824532ec3ee33119cd70e933ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00bda6824532ec3ee33119cd70e933ee">&#9670;&#160;</a></span>pDataTable</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t AudioFilePlayer::pDataTable</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, </div>
<div class="line">    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, </div>
<div class="line">    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, </div>
<div class="line">    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, </div>
<div class="line">    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, </div>
<div class="line">    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, </div>
<div class="line">    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, </div>
<div class="line">    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, </div>
<div class="line">    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, </div>
<div class="line">    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5}</div>
</div><!-- fragment --><p>Volume translation table at a given volume. Since volume isn't changed often, we pre-calculate all 256 8-bit output values after the volume is changed. This is more efficient than making the calculation on every value to be output. </p>

</div>
</div>
<a id="a276302fd9d6beee55f40c42a5a6d7e69" name="a276302fd9d6beee55f40c42a5a6d7e69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a276302fd9d6beee55f40c42a5a6d7e69">&#9670;&#160;</a></span>pinDAC</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t AudioFilePlayer::pinDAC = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Holding place for the pin used as the DAC output. </p>

</div>
</div>
<a id="ae1fbdee2b20f23494c8cd5c51880a5c6" name="ae1fbdee2b20f23494c8cd5c51880a5c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1fbdee2b20f23494c8cd5c51880a5c6">&#9670;&#160;</a></span>pWave</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">WaveFileType * AudioFilePlayer::pWave = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Base class instance for the loaded wave file to be processed/played. </p>

</div>
</div>
<a id="aa6ca81bc127489899a0ea42ff2126db6" name="aa6ca81bc127489899a0ea42ff2126db6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6ca81bc127489899a0ea42ff2126db6">&#9670;&#160;</a></span>taskSleepTimeTarget</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t AudioFilePlayer::taskSleepTimeTarget</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used in native mode to simulate processing at semi-realtime of the data (slowing things down) </p>

</div>
</div>
<a id="ac7acade6317d57f2aee2f4b369773369" name="ac7acade6317d57f2aee2f4b369773369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7acade6317d57f2aee2f4b369773369">&#9670;&#160;</a></span>timerNumber</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t AudioFilePlayer::timerNumber</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Holding place for the timer number to be used in the ESP32 device. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="_audio_file_player_8h_source.html">AudioFilePlayer.h</a></li>
<li>src/<a class="el" href="_audio_file_player_8cpp.html">AudioFilePlayer.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
